version: "3.9"version: "3.9"version: "3.9"version: "3.9"



services:

  backend:

    build:services:

      context: ./backend

    image: pinterest-backend  backend:

    container_name: pinterest-backend

    restart: unless-stopped    build:services:services:

    environment:

      - FLASK_ENV=production      context: ./backend

      - PYTHONUNBUFFERED=1

    volumes:    image: yttmp3-backend:latest  backend:  backend:

      - ./backend/downloads:/app/downloads

    networks:    container_name: pinterest-backend

      - app-network

    restart: unless-stopped    build:    build:

  frontend:

    build:    environment:

      context: ./frontend

      args:      FLASK_ENV: production      context: ./backend      context: ./backend

        VITE_API_URL: /

    image: pinterest-frontend      PYTHONUNBUFFERED: 1

    container_name: pinterest-frontend

    restart: unless-stopped    volumes:    image: yttmp3-backend:latest    image: yttmp3-backend:latest

    depends_on:

      - backend      - ./backend/downloads:/app/downloads

    ports:

      - "8080:80"    expose:    container_name: pinterest-backend    restart: unless-stopped

    networks:

      - app-network      - "5000"



networks:    networks:    restart: unless-stopped    environment:

  app-network:

    driver: bridge      - app-network



volumes:    environment:      FLASK_ENV: production

  downloads:
  web:

    build:      FLASK_ENV: production    expose:

      context: ./frontend

      args:      PYTHONUNBUFFERED: 1      - "5000"

        VITE_API_URL: /

    image: yttmp3-frontend:latest    volumes:

    container_name: pinterest-frontend

    restart: unless-stopped      - ./backend/downloads:/app/downloads  web:

    depends_on:

      - backend    expose:    build:

    ports:

      - "8080:80"      - "5000"      context: ./frontend

    networks:

      - app-network    networks:      args:



networks:      - app-network        VITE_API_URL: /

  app-network:

    driver: bridge    image: yttmp3-frontend:latest


  web:    restart: unless-stopped

    build:    depends_on:

      context: ./frontend      - backend

      args:    ports:

        VITE_API_URL: /      - "8080:80"

    image: yttmp3-frontend:latest

    container_name: pinterest-frontendnetworks:

    restart: unless-stopped  default:

    depends_on:    name: yttmp3-network

      - backend
    ports:
      - "8080:80"
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
